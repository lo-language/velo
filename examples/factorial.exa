receive args, io;

factorial = service {

    receive num;

    if num < 0 {
        fail "I pity the fool!";
    }

    if num <= 1 {
        reply 1;
    }

    reply num * recur(num - 1);
};

*io.stdout.write("`factorial(args[0])`\n");