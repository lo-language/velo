{"type":"procedure", "body":{
    "type":"stmt_list",
    "head":{
        "type":"assign",
        "op":"=",
        "left":{
            "type":"id",
            "name":"foo"
        },
        "right":{
            "type":"string",
            "val":"hello"
        }
    },
    "tail":{
        "type":"stmt_list",
        "head":{
            "type":"assign",
            "op":"=",
            "left":{
                "type":"id",
                "name":"foo"
            },
            "right":{
                "type":"boolean",
                "val":true
            }
        },
        "tail":{
            "type":"stmt_list",
            "head":{
                "type":"assign",
                "op":"=",
                "left":{
                    "type":"id",
                    "name":"foo"
                },
                "right":{
                    "type":"boolean",
                    "val":false
                }
            },
            "tail":{
                "type":"stmt_list",
                "head":{
                    "type":"assign",
                    "op":"=",
                    "left":{
                        "type":"id",
                        "name":"foo"
                    },
                    "right":{
                        "type":"number",
                        "val":10
                    }
                },
                "tail":{
                    "type":"stmt_list",
                    "head":{
                        "type":"assign",
                        "op":"++",
                        "left":{
                            "type":"id",
                            "name":"foo"
                        }
                    },
                    "tail":{
                        "type":"stmt_list",
                        "head":{
                            "type":"assign",
                            "op":"--",
                            "left":{
                                "type":"id",
                                "name":"foo"
                            }
                        },
                        "tail":{
                            "type":"stmt_list",
                            "head":{
                                "type":"assign",
                                "op":"+=",
                                "left":{
                                    "type":"id",
                                    "name":"foo"
                                },
                                "right":{
                                    "type":"number",
                                    "val":5
                                }
                            },
                            "tail":{
                                "type":"stmt_list",
                                "head":{
                                    "type":"assign",
                                    "op":"-=",
                                    "left":{
                                        "type":"id",
                                        "name":"foo"
                                    },
                                    "right":{
                                        "type":"number",
                                        "val":7
                                    }
                                },
                                "tail":{
                                    "type":"stmt_list",
                                    "head":{
                                        "type":"assign",
                                        "op":"*=",
                                        "left":{
                                            "type":"id",
                                            "name":"foo"
                                        },
                                        "right":{
                                            "type":"number",
                                            "val":10
                                        }
                                    },
                                    "tail":{
                                        "type":"stmt_list",
                                        "head":{
                                            "type":"assign",
                                            "op":"/=",
                                            "left":{
                                                "type":"id",
                                                "name":"foo"
                                            },
                                            "right":{
                                                "type":"number",
                                                "val":4
                                            }
                                        },
                                        "tail":{
                                            "type":"stmt_list",
                                            "head":{
                                                "type":"assign",
                                                "op":"%=",
                                                "left":{
                                                    "type":"id",
                                                    "name":"foo"
                                                },
                                                "right":{
                                                    "type":"number",
                                                    "val":360
                                                }
                                            },
                                            "tail":{
                                                "type":"stmt_list",
                                                "head":{
                                                    "type":"expr_stmt",
                                                    "expr":{
                                                        "type":"request",
                                                        "to":{
                                                            "type":"id",
                                                            "name":"doSomething"
                                                        },
                                                        "args":[]
                                                    }
                                                },
                                                "tail":{
                                                    "type":"stmt_list",
                                                    "head":{
                                                        "type":"assign",
                                                        "op":"=",
                                                        "left":{
                                                            "type":"subscript",
                                                            "list":{
                                                                "type":"id",
                                                                "name":"foo"
                                                            }
                                                        },
                                                        "right":{
                                                            "type":"number",
                                                            "val":17
                                                        }
                                                    },
                                                    "tail":{
                                                        "type":"stmt_list",
                                                        "head":{
                                                            "type":"expr_stmt",
                                                            "expr":{
                                                                "type":"request",
                                                                "to":{
                                                                    "type":"subscript",
                                                                    "list":{
                                                                        "type":"request",
                                                                        "to":{
                                                                            "type":"select",
                                                                            "set":{
                                                                                "type":"subscript",
                                                                                "list":{
                                                                                    "type":"subscript",
                                                                                    "list":{
                                                                                        "type":"id",
                                                                                        "name":"monkeys"
                                                                                    },
                                                                                    "index":{
                                                                                        "type":"string",
                                                                                        "val":"chickens"
                                                                                    }
                                                                                },
                                                                                "index":{
                                                                                    "type":"number",
                                                                                    "val":15
                                                                                }
                                                                            },
                                                                            "member":"wow"
                                                                        },
                                                                        "args":[
                                                                            {
                                                                                "type":"set",
                                                                                "members":[
                                                                                    {
                                                                                        "type":"dyad",
                                                                                        "key":{
                                                                                            "type":"boolean",
                                                                                            "val":true
                                                                                        },
                                                                                        "value":{
                                                                                            "type":"number",
                                                                                            "val":72
                                                                                        }
                                                                                    },
                                                                                    {
                                                                                        "type":"dyad",
                                                                                        "key":{
                                                                                            "type":"number",
                                                                                            "val":89
                                                                                        },
                                                                                        "value":{
                                                                                            "type":"number",
                                                                                            "val":42
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    "index":{
                                                                        "type":"number",
                                                                        "val":17
                                                                    }
                                                                },
                                                                "args":[
                                                                    {
                                                                        "type":"number",
                                                                        "val":57
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        "tail":{
                                                            "type":"stmt_list",
                                                            "head":{
                                                                "type":"expr_stmt",
                                                                "expr":{
                                                                    "type":"request",
                                                                    "to":{
                                                                        "type":"set",
                                                                        "members":[
                                                                            {
                                                                                "type":"dyad",
                                                                                "key":{
                                                                                    "type":"string",
                                                                                    "val":"whale"
                                                                                },
                                                                                "value":{
                                                                                    "type":"number",
                                                                                    "val":57
                                                                                }
                                                                            },
                                                                            {
                                                                                "type":"dyad",
                                                                                "key":{
                                                                                    "type":"id",
                                                                                    "name":"foo"
                                                                                },
                                                                                "value":{
                                                                                    "type":"number",
                                                                                    "val":52
                                                                                }
                                                                            },
                                                                            {
                                                                                "type":"dyad",
                                                                                "key":{
                                                                                    "type":"number",
                                                                                    "val":42
                                                                                },
                                                                                "value":{
                                                                                    "type":"number",
                                                                                    "val":7
                                                                                }
                                                                            },
                                                                            {
                                                                                "type":"dyad",
                                                                                "key":{
                                                                                    "type":"string",
                                                                                    "val":"porkchop"
                                                                                },
                                                                                "value":{
                                                                                    "type":"boolean",
                                                                                    "val":true
                                                                                }
                                                                            },
                                                                            {
                                                                                "type":"dyad",
                                                                                "key":{
                                                                                    "type":"id",
                                                                                    "name":"buttercup"
                                                                                },
                                                                                "value":{
                                                                                    "type":"boolean",
                                                                                    "val":true
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "args":[]
                                                                }
                                                            },
                                                            "tail":{
                                                                "type":"stmt_list",
                                                                "head":{
                                                                    "type":"assign",
                                                                    "op":"=",
                                                                    "left":{
                                                                        "type":"id",
                                                                        "name":"monkeys"
                                                                    },
                                                                    "right":{
                                                                        "type":"number",
                                                                        "val":72
                                                                    }
                                                                },
                                                                "tail":{
                                                                    "type":"stmt_list",
                                                                    "head":{
                                                                        "type":"assign",
                                                                        "op":"=",
                                                                        "left":{
                                                                            "type":"id",
                                                                            "name":"result"
                                                                        },
                                                                        "right":{
                                                                            "type":"connection",
                                                                            "connector":"->",
                                                                            "source":{
                                                                                "type":"connection",
                                                                                "connector":"~>",
                                                                                "source":{
                                                                                    "type":"request",
                                                                                    "to":{
                                                                                        "type":"id",
                                                                                        "name":"foo"
                                                                                    },
                                                                                    "args":[]
                                                                                },
                                                                                "sink":{
                                                                                    "type":"procedure",
                                                                                    "body":{
                                                                                        "type":"stmt_list",
                                                                                        "head":{
                                                                                            "type":"receive",
                                                                                            "names":["err"]
                                                                                        },
                                                                                        "tail":{
                                                                                            "type":"stmt_list",
                                                                                            "head":{
                                                                                                "type":"expr_stmt",
                                                                                                "expr":{
                                                                                                    "type":"request",
                                                                                                    "to":{
                                                                                                        "type":"id",
                                                                                                        "name":"log"
                                                                                                    },
                                                                                                    "args":[
                                                                                                        {
                                                                                                            "type":"id",
                                                                                                            "name":"err"
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            },
                                                                                            "tail":{
                                                                                                "type":"stmt_list",
                                                                                                "head":{
                                                                                                    "type":"result",
                                                                                                    "channel":"reply",
                                                                                                    "args":[
                                                                                                        {
                                                                                                            "type":"id",
                                                                                                            "name":"fixed"
                                                                                                        }
                                                                                                    ]
                                                                                                },
                                                                                                "tail":null
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            },
                                                                            "sink":{
                                                                                "type":"procedure",
                                                                                "body":{
                                                                                    "type":"stmt_list",
                                                                                    "head":{
                                                                                        "type":"receive",
                                                                                        "names":["result"]
                                                                                    },
                                                                                    "tail":null
                                                                                }
                                                                            }
                                                                        }
                                                                    },
                                                                    "tail":{
                                                                        "type":"stmt_list",
                                                                        "head":{
                                                                            "type":"assign",
                                                                            "op":"=",
                                                                            "left":{
                                                                                "type":"id",
                                                                                "name":"index"
                                                                            },
                                                                            "right":{
                                                                                "type":"number",
                                                                                "val":0
                                                                            }
                                                                        },
                                                                        "tail":{
                                                                            "type":"stmt_list",
                                                                            "head":{
                                                                                "type":"assign",
                                                                                "op":"=",
                                                                                "left":{
                                                                                    "type":"id",
                                                                                    "name":"iterator"
                                                                                },
                                                                                "right":{
                                                                                    "type":"procedure",
                                                                                    "body":{
                                                                                        "type":"stmt_list",
                                                                                        "head":{
                                                                                            "type":"result",
                                                                                            "channel":"reply",
                                                                                            "args":[
                                                                                                {
                                                                                                    "type":"subscript",
                                                                                                    "list":{
                                                                                                        "type":"id",
                                                                                                        "name":"items"
                                                                                                    },
                                                                                                    "index":{
                                                                                                        "type":"id",
                                                                                                        "name":"index"
                                                                                                    }
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        "tail":{
                                                                                            "type":"stmt_list",
                                                                                            "head":{
                                                                                                "type":"assign",
                                                                                                "op":"++",
                                                                                                "left":{
                                                                                                    "type":"id",
                                                                                                    "name":"index"
                                                                                                }
                                                                                            },
                                                                                            "tail":null
                                                                                        }
                                                                                    }
                                                                                }
                                                                            },
                                                                            "tail":{
                                                                                "type":"stmt_list",
                                                                                "head":{
                                                                                    "type":"result",
                                                                                    "channel":"reply",
                                                                                    "args":[
                                                                                        {
                                                                                            "type":"id",
                                                                                            "name":"iterator"
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                "tail":{
                                                                                    "type":"stmt_list",
                                                                                    "head":{
                                                                                        "type":"complete",
                                                                                        "promises":[
                                                                                            {
                                                                                                "type":"id",
                                                                                                "name":"foo"
                                                                                            }
                                                                                        ]
                                                                                    },
                                                                                    "tail":{
                                                                                        "type":"stmt_list",
                                                                                        "head":{
                                                                                            "type":"complete",
                                                                                            "promises":[
                                                                                                {
                                                                                                    "type":"request",
                                                                                                    "to":{
                                                                                                        "type":"id",
                                                                                                        "name":"foo"
                                                                                                    },
                                                                                                    "args":[]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        "tail":{
                                                                                            "type":"stmt_list",
                                                                                            "head":{
                                                                                                "type":"complete",
                                                                                                "promises":[
                                                                                                    {
                                                                                                        "type":"id",
                                                                                                        "name":"a"
                                                                                                    },
                                                                                                    {
                                                                                                        "type":"id",
                                                                                                        "name":"b"
                                                                                                    },
                                                                                                    {
                                                                                                        "type":"id",
                                                                                                        "name":"c"
                                                                                                    },
                                                                                                    {
                                                                                                        "type":"id",
                                                                                                        "name":"d"
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            "tail":null
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}}