/*

calculates all possible combinations for the android lockscreen

the path is a list of nodes

*/

receive path;

numNodes = 2;

// base case - only one possibility left
if #path == numNodes
    reply(1);

// declare just to put in scope - can we make this unnecessary?
combos = 0;

// count through the nodes
0..numNodes >>

    receive node;

    if node in path
        skip;

    // node is novel in the path; see if it's a legal next step

    if path[] == 0

        if
        (node == 2 and !(1 in path)) or
        (node == 6 and !(3 in path)) or
        (node == 8 and !(4 in path))
            skip;

    // todo fill in the rest of these - 3 per corner node, 1 per edge node, 16 cases total

    combos += recur(path + [node]);

// this pisses me right off
;

// should this usage be enough to declare the var in this scope? i think it should
reply(combos);