/**

 This test is exercising an open question in the runtime spec -- the reply is sent before the
 async calls have returned; how do we feel about that? we could have the reply hold off until
 all responses are collected, but for now, we do not.

 */

main is (log) {

    num = 0;
    val = 0;

    while num < 3 {

        if num > 1 {
            @log <- ("hello hello!\n");
        }
        else {
            @log <- ("howdy!\n");
        }

        num++;
    }

    while num < 5 {

        @log <- ("ok.\n");
        num++;
    }

    reply num;
};