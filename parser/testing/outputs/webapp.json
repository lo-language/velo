{ "action": [ "args", "io", "env", "kit" ],
    "statements":
            [ [ "=>",
                { "invoke": [ "select", [ "id", "kit" ], "get" ],
                    "args": [ [ "str", "http/server" ], [ "id", "log" ] ] },
                [ "id", "server" ] ],
                [ "=>",
                    { "invoke": [ "select", [ "id", "kit" ], "get" ],
                        "args":
                                [ [ "str", "http/logger/elf" ],
                                    [ "select", [ "id", "io" ], "err" ] ] },
                    [ "id", "log" ] ],
                [ ">|",
                    [ ">>",
                        [ ">~",
                            { "invoke": [ "select", [ "id", "server" ], "onRequest" ],
                                "args": [] },
                            { "action": [ "err" ], "statements": [] } ],
                        { "action": [ "request" ],
                            "statements":
                                    [ { "invoke":
                                            [ "select",
                                                [ "select", [ "id", "request" ], "response" ],
                                                "end" ],
                                        "args": [ [ "str", "howdy!" ] ] },
                                        { "invoke": [ "id", "recur" ], "args": [ [ "str", "42" ] ] } ] } ],
                    { "action": [], "statements": [] } ],
                { "invoke": [ "id", "reply" ], "args": [] },
                { "invoke": [ "id", "fail" ], "args": [] },
                { "invoke": [ "id", "end" ], "args": [] },
                { "invoke": [ "select", [ "id", "listeners" ], "push" ],
                    "args": [ [ "id", "reply" ] ] },
                { "invoke": [ "select", [ "id", "listeners" ], "remove" ],
                    "args": [ [ "id", "reply" ] ] },
                [ ">>",
                    { "invoke": [ "select", [ "id", "button" ], "click" ], "args": [] },
                    { "action": [ "click" ], "statements": [] } ],
                { "op": "assign",
                    "left": [ "id", "foo" ],
                    "right":
                    { "action": [ "input" ],
                        "statements":
                                [ { "invoke": [ "id", "reply" ],
                                    "args": [ { "op": "mult", "left": [ "id", "input" ], "right": 2 } ] } ] } },
                [ ">|",
                    [ ">>",
                        { "invoke": [ "select", [ "id", "file" ], "read" ], "args": [] },
                        [ "id", "foo" ] ],
                    { "action": [], "statements": [] } ],
                [ "->",
                    [ ">~",
                        { "invoke": [ "select", [ "id", "server" ], "listen" ],
                            "args": [ ["select", [ "id", "io" ], "port"] ] },
                        { "action": [ "err" ],
                            "statements":
                                    [ { "invoke": [ "select", [ "id", "log" ], "err" ],
                                        "args": [ [ "str", "failed to open port __port.num__: " ] ] } ] } ],
                    { "action": [],
                        "statements":
                                [ { "invoke": [ "select", [ "id", "log" ], "info" ],
                                    "args": [ [ "str", "server running on port __port.num__" ] ] } ] } ],
                [ "->",
                    { "invoke": [ "select", [ "id", "env" ], "on" ],
                        "args": [ [ "str", "SIGINT" ] ] },
                    { "action": [],
                        "statements":
                                [ { "invoke": [ "select", ["select", [ "id", "io" ], "err"], "writeLine" ],
                                    "args": [ [ "str", "received SIGINT" ] ] },
                                    { "invoke": [ "select", [ "id", "server" ], "stop" ], "args": [] } ] } ] ] }